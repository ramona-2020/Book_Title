{% extends 'base/base.html' %}
{% load profiles %}
{% user_profile as hp %}

{% block page_content %}

  <section class="details-page">
        <h1>Details</h1>
        <article class="details-card">

            <article class="details-card-text">
                <h2>Title:<br> {{ book.title }}</h2>
                <h3>Author: {{ book.author }}</h3>
                <h3>Stars: {{ book.stars }}</h3>
                <h3>Genre: {{ book.genre }}</h3>
                <h3>Review: {{ book.review }}</h3>

                <!-- If there is no registered user, do not display buttons-->
                {% if hp %}
                <div class="buttons">
                    <!-- Only for registered user and author of the review -->
                    <a href="{% url 'book edit' book.pk %}" class="btn-edit">Edit</a>
                    <a href="{% url 'book delete' book.pk %}" class="btn-delete">Delete</a>
                    <!-- user who has not yet wished book-->
                    {% if book not in hp.wishing_list.prefetch_related %}
                        <a href="{% url 'book add to wishlist' book.pk %}" class="btn-wish">Wish to read</a>
                    {% else %}
                        <!-- user who has already wished book-->
                        <p class="wish-pub">You already added the book to your wish list</p>
                    {% endif %}
                </div>
                {% endif %}

            </article>

            <article class="details-card-image">
                <img src="{{ book.image.url }}" alt="{{ book.title }}">
            </article>

        </article>
    </section>

{% endblock %}